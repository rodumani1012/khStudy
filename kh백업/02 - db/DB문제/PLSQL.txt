SET SERVEROUTPUT ON;

-- ALLEN의 COMM이 있는지 확인 후, 있으면 COMM을 출력하고 없으면 COMM IS NULL 이라고 출력하자.
DECLARE
  MYEMP EMP%ROWTYPE;
BEGIN
  SELECT * INTO MYEMP
  FROM EMP
  WHERE ENAME='ALLEN';
  
  IF(MYEMP.COMM IS NULL) THEN
   DBMS_OUTPUT.PUT_LINE('COMM IS NULL');
  ELSE
   DBMS_OUTPUT.PUT_LINE('ALLEN의 COMM : '||MYEMP.COMM);
  END IF;
END;
/


-- TABLE 만들고, PLSQL로 데이터 입력하자
CREATE TABLE PLTEST(PLNUM NUMBER(3), PLNAME VARCHAR2(10));

BEGIN
  FOR I IN 1..10 LOOP
    INSERT INTO PLTEST VALUES(I,SYSDATE);
  END LOOP;
END;
/

SELECT * FROM PLTEST;

-- 구구단 출력하자
DECLARE
  TOTAL NUMBER := 0;
BEGIN
  FOR I IN 2..9 LOOP
    DBMS_OUTPUT.PUT_LINE(I||'단');
    FOR J IN 1..9 LOOP
      TOTAL := I*J;
      DBMS_OUTPUT.PUT_LINE(I||'*'||J||'='||TOTAL);
    END LOOP;
    DBMS_OUTPUT.PUT_LINE('-------');
  END LOOP;
END;
/


-- 20번 부서의 평균 급여 출력하자
DECLARE
  AVG01 NUMBER(7) := 0;
  DEPTNO01 NUMBER(7) := 20;
  COUNT01 NUMBER(7) := 0;
BEGIN
  SELECT AVG(SAL),COUNT(DEPTNO) INTO AVG01, COUNT01
  FROM EMP
  WHERE DEPTNO=DEPTNO01
  GROUP BY DEPTNO;
  DBMS_OUTPUT.PUT_LINE(DEPTNO01||'번 부서의 ['||COUNT01||']명 평균 급여는 ['||AVG01||']원 입니다.');
END;
/


-- 입력한 값의 구구단만 출력하자

DECLARE
  INPUTNUM NUMBER;
BEGIN
  INPUTNUM := &IN_NUM;
  DBMS_OUTPUT.PUT_LINE(INPUTNUM||'단');
  FOR I IN 1..9 LOOP
    DBMS_OUTPUT.PUT_lINE(INPUTNUM||'*'||I||'='||(INPUTNUM*I));
  END LOOP;
END;
/


-- 입력한 값의 구구단만 출력하자. 단, 입력값이 없으면 2단을 출력하자.

ACCEPT INPUTVAL PROMPT '몇단?' DEFAULT 2

DECLARE
  INPUTNUM NUMBER;
BEGIN
  INPUTNUM := &INPUTVAL;
  DBMS_OUTPUT.PUT_LINE(INPUTNUM||'단');
  FOR I IN 1..9 LOOP
    DBMS_OUTPUT.PUT_lINE(INPUTNUM||'*'||I||'='||(INPUTNUM*I));
  END LOOP;
END;
/



