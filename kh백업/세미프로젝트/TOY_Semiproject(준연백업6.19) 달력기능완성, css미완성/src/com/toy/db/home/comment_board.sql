DROP
	TABLE
		COMMENT_BOARD;

DROP
	SEQUENCE COMMENTSEQ;

DROP
	SEQUENCE GROUPNOSEQ;

CREATE
	SEQUENCE COMMENTSEQ;

CREATE
	SEQUENCE GROUPNOSEQ;

CREATE
	TABLE
		COMMENT_BOARD(COMMENT_NUM NUMBER PRIMARY KEY,
		NORMAL_NUM NUMBER NOT NULL,
		USER_NUM NUMBER NOT NULL,
		USER_NICKNAME VARCHAR2(100) NOT NULL,
		COMMENT_CONTENT VARCHAR2(2000) NULL,
		COMMENT_GROUPNO NUMBER NOT NULL,
		COMMENT_GROUPSQ NUMBER NOT NULL,
		COMMENT_TITLETAB NUMBER NOT NULL,
		COMMENT_DEL VARCHAR2(2) NOT NULL,
		CONSTRAINT COMMENT_DEL_CHK CHECK (COMMENT_DEL IN ('Y',
		'N')));

SELECT
	*
FROM
	COMMENT_BOARD
WHERE
	NORMAL_NUM = 1
ORDER BY
	COMMENT_GROUPNO DESC,
	COMMENT_GROUPSQ;


INSERT
	INTO
		COMMENT_BOARD
	VALUES(COMMENTSEQ.NEXTVAL,
	5,
	1,
	'빈',
	'WOW',
	GROUPNOSEQ.NEXTVAL,
	1,
	0,
	'N');

INSERT
	INTO
		COMMENT_BOARD
	VALUES(COMMENTSEQ.NEXTVAL,
	5,
	1,
	'빈',
	'GOOD',
	GROUPNOSEQ.NEXTVAL,
	1,
	0,
	'N');
--두번째 글에 답변 작성
-- 그룹번호 유지, 그룹순서 +1 TITLETAB+1
 INSERT
	INTO
		COMMENT_BOARD
	VALUES(COMMENTSEQ.NEXTVAL,
	1,
	1,
	'빈',
	'GOOD',
	(
	SELECT
		COMMENT_GROUPNO
	FROM
		COMMENT_BOARD
	WHERE
		COMMENT_NUM = 1),
	(
	SELECT
		COMMENT_GROUPSQ
	FROM
		COMMENT_BOARD
	WHERE
		COMMENT_NUM = 1)+ 1,
	(
	SELECT
		COMMENT_TITLETAB
	FROM
		COMMENT_BOARD
	WHERE
		COMMENT_NUM = 1 )+ 1,
	'N' );